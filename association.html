<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Association Images et Mots</title>
  <link rel="stylesheet" href="style.css">
  <style>
    .association-container {
      text-align: center;
      padding: 20px;
      color: white;
    }

    .images-zone, .mots-zone {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .drop-zone {
      border: 2px dashed #ccc;
      padding: 10px;
      width: 150px;
      height: 150px;
      background-color: rgba(255,255,255,0.1);
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .drop-zone img {
      max-width: 100%;
      max-height: 100%;
      height: auto;
    }

    .draggable {
      background-color: #002bff;
      color: white;
      padding: 10px 15px;
      border-radius: 8px;
      cursor: grab;
      user-select: none;
      min-width: 120px;
      text-align: center;
    }

    #feedback {
      margin-top: 20px;
      font-size: 1.2rem;
      font-weight: bold;
    }
  </style>
</head>
<body>
<div class="association-container" id="jeu-association">
  <h2>Associe chaque image au mot correspondant</h2>
  <div class="images-zone">
    <!-- Les images comme avant -->
    <!-- ... (rien à modifier ici) ... -->
  </div>
  <div class="mots-zone">
    <!-- Les mots comme avant -->
    <!-- ... (rien à modifier ici) ... -->
  </div>
  <button onclick="validerAssociations()">Valider</button>
  <button onclick="resetAssociations()">Réinitialiser</button>
  <div id="feedback"></div>
</div>
<script>
  const draggables = document.querySelectorAll('.draggable');
  const dropZones = document.querySelectorAll('.drop-zone');

  draggables.forEach(drag => {
    drag.addEventListener('dragstart', e => {
      e.dataTransfer.setData('text/plain', drag.getAttribute('data-word'));
      drag.classList.add('is-dragging');
    });

    drag.addEventListener('dragend', e => {
      drag.classList.remove('is-dragging');
    });
  });

  dropZones.forEach(zone => {
    zone.addEventListener('dragover', e => e.preventDefault());
    zone.addEventListener('drop', e => {
      e.preventDefault();
      const droppedWord = e.dataTransfer.getData('text/plain');
      if (zone.querySelector('.dropped-label')) return;

      zone.setAttribute('data-user', droppedWord);
      const label = document.createElement('div');
      label.textContent = droppedWord;
      label.classList.add('dropped-label');
      label.style.cssText = `
        position: absolute;
        bottom: 5px;
        width: 100%;
        font-weight: bold;
        background-color: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 4px 0;
        text-align: center;
        border-radius: 5px;
        font-size: 0.9rem;
      `;
      label.addEventListener('click', () => {
        zone.removeAttribute('data-user');
        label.remove();
      });

      zone.querySelectorAll('.dropped-label').forEach(div => div.remove());
      zone.appendChild(label);
    });
  });

  function validerAssociations() {
    let score = 0;
    dropZones.forEach(zone => {
      if (zone.getAttribute('data-user') === zone.getAttribute('data-correct')) {
        score++;
      }
    });

    const feedback = document.getElementById('feedback');
    if (score === dropZones.length) {
      feedback.textContent = `Bravo ! Le mot code est: Encre`;
      feedback.style.color = 'lightgreen';
    } else {
      feedback.textContent = `${score} bonnes réponses sur ${dropZones.length}. Essayez encore !`;
      feedback.style.color = 'orange';
    }
  }

  function resetAssociations() {
    dropZones.forEach(zone => {
      zone.removeAttribute('data-user');
      const label = zone.querySelector('.dropped-label');
      if (label) label.remove();
    });
    document.getElementById('feedback').textContent = '';
  }

  window.onload = function () {
    // Plus de minuterie
  };
</script>
</body>
</html>
